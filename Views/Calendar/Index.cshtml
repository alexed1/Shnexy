@using DayPilot.Web.Mvc
@model Shnexy.Models.Email
@using DayPilot.Web.Mvc.Enums
@using DayPilot.Web.Mvc.Enums.Calendar
@using DayPilot.Web.Mvc.Enums.Navigator
@using DayPilot.Web.Mvc.Events.Calendar
@using DayPilot.Web.Mvc.Events.Navigator
@using DayPilot.Web.Mvc.Themes.Calendar

@{
    ViewBag.Title = "DayPilot Scheduler for ASP.NET MVC 4";
}

<script type="text/javascript">
    function modal(url) {
        var m = new DayPilot.Modal();
        m.closed = function () {
            if (this.result == "OK") {
                dps.commandCallBack('refresh');
            }
            dps.clearSelection();
        };
        m.showUrl(url);
    }
</script>

<div class="jumbotron">
    @*<h3>Booking Agent</h3>
    *@
    <div class="row" style="font-size: 0.85em">
        <div class="col-md-5" style="border: 2px solid gray; padding-left: 20px; height: 520px">
            <br />

            <div class="row">
                <div class="col-md-2">
                    <div>From:</div>
                </div>
                <div class="col-md-9">
                    <div class="bookingAgentFormControlBorder">@Html.DisplayFor(model => model.Sender)</div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-10" style="height: 20px">
                </div>
            </div>

            <div class="row">
                <div class="col-md-2">
                    <div>Subject:</div>
                </div>
                <div class="col-md-9">
                    <div class="bookingAgentFormControlBorder">@Html.DisplayFor(model => model.Subject)</div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-10" style="height: 20px">
                </div>
            </div>

            <div class="row">
                <div class="col-md-2">
                    <div>To:</div>
                </div>
                <div class="col-md-9">
                    <div class="bookingAgentFormControlBorder"></div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-10" style="height: 20px">
                </div>
            </div>

            <div class="row">
                <div class="col-md-2">
                    <div>Bcc:</div>
                </div>
                <div class="col-md-9">
                    <div class="bookingAgentFormControlBorder"></div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-10" style="height: 20px">
                </div>
            </div>

            <div class="row">
                <div class="col-md-2">
                    <div>Body:</div>
                </div>
                <div class="col-md-9">
                    <div style="height: 200px;overflow-x: scroll" class="bookingAgentFormControlBorder">@Html.DisplayFor(model => model.Body)</div>
                </div>
            </div>

            <br />
        </div>
        <div class="col-md-7" style="border: 2px solid gray; height: 520px">
            <div class="row">
                @Html.DayPilotMenu("menu1", new DayPilotMenuConfig
                {
                    Items = new DayPilot.Web.Mvc.MenuItemCollection()
                    {
                        @*new DayPilot.Web.Mvc.MenuItem { Text = "Open", Action = MenuItemAction.JavaScript, JavaScript = "modal('/New?id=" + e.value() + "');"},*@

                        new DayPilot.Web.Mvc.MenuItem { Text = "Open", Action = MenuItemAction.JavaScript, JavaScript = "modal('http://localhost:50613/Calendar/New');"},


                        @*new DayPilot.Web.Mvc.MenuItem { Text = "Open", Action = MenuItemAction.JavaScript, Command = "Open"},*@
                        new DayPilot.Web.Mvc.MenuItem { Text = "Delete", Action = MenuItemAction.CallBack, Command = "Delete"}
                    }
                })

                @Html.DayPilotMenu("menu2", new DayPilotMenuConfig
                {
                    Items = new DayPilot.Web.Mvc.MenuItemCollection()
                    {
                        new DayPilot.Web.Mvc.MenuItem { Text = "Open", Action = MenuItemAction.JavaScript, JavaScript = "alert(e.value());"}
                    }
                })

               @Html.DayPilotBubble("bubble")

                @(Html.DayPilotCalendar("dpc", new DayPilotCalendarConfig
                    {
                        ViewType = DayPilot.Web.Mvc.Enums.Calendar.ViewType.Week,
                        BackendUrl = Url.Content("~/Calendar/Backend"),
                        EventMoveHandling = EventMoveHandlingType.CallBack,
                        EventResizeHandling = EventResizeHandlingType.CallBack,
                        TimeRangeSelectedHandling = DayPilot.Web.Mvc.Events.Calendar.TimeRangeSelectedHandlingType.CallBack,
                        ShowAllDayEvents = true,
                        Height = 400,
                        HeightSpec = HeightSpec.BusinessHours,
                        EventBubble = "bubble",
                        EventClickHandling = EventClickHandlingType.CallBack,                        
                        HeaderClickHandling = HeaderClickHandlingType.JavaScript,                        
                        ContextMenu = "menu1",
                        HeaderClickJavaScript = "alert('Day clicked: ' + c.date);"
                    }))


  
                <script type="text/javascript">
                    function modal(url) {
                        var m = new DayPilot.Modal();
                        m.closed = function () {
                            if (this.result == "OK") {
                                dps.commandCallBack('refresh');
                            }
                            dps.clearSelection();
                        };
                        m.showUrl(url);
                    }
                </script>

            </div>
            <br />
            <div class="Row">
                <input type="button" value="OK" style="width: 150px; height: 30px; border: 2px solid black; float: right" />
            </div>
        </div>
    </div>

</div>

<div class="row">
    @Html.ActionLink("Show Users", "Index", "User");
</div>
